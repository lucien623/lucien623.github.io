<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>ARouter原理探析 | Lucien</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ARouter原理探析</h1><a id="logo" href="/.">Lucien</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ARouter原理探析</h1><div class="post-meta">Oct 24, 2019<span> | </span><span class="category"><a href="/categories/技术/">技术</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><p><code>ARouter</code>是<code>alibaba</code>开源的组件化开发框架，在之前开发项目中也用到了，今天就来大致分析下其功能的流，这里以分析创建<code>Provider</code>为例。<br>首先我们在<code>base</code>模块中定义了一个<code>Factory</code>获取<code>Proivder</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ModuleProviderFactory</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 获取模块Provider</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends IProvider&gt; <span class="function">T <span class="title">getModuleProvider</span><span class="params">(String providerName)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (T) ARouter.getInstance().build(providerName).navigation();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>以及为不同的 module 创建了<code>Provider</code>，这些<code>Provider</code>中定义了需要实现的行为<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IModuleAProvider</span> <span class="keyword">extends</span> <span class="title">IProvider</span> </span>&#123;</div><div class="line">    <span class="function">String <span class="title">sayHello</span><span class="params">(String name)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>上面这个是<code>ModuleA</code>的<code>Provider</code>，我们来看看<code>ModuleA</code>中的实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Route</span>(path = ProviderPath.PROVIDE_MODULEA)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ModuleAProvider</span> <span class="keyword">implements</span> <span class="title">IModuleAProvider</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>ProviderPath</code>中定义了<code>Provider</code>的获取路径，在<code>base</code>模块中创建，假如在另一个<code>ModuleB</code>想调用<code>ModuleA</code>暴露出来的接口，就可以如下方式<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">IModuleAProvider iModuleAProvider = ModuleProviderFactory.getModuleProvider(ProviderPath.PROVIDE_MODULEA);</div><div class="line">iModuleAProvider.sayHello(<span class="string">""</span>);</div></pre></td></tr></table></figure></p>
<p><code>iModuleAProvider</code>指向通过调用<code>ARouter.getInstance().build(providerName).navigation()</code>返回的实例，我们先来看其初始化流程，在<code>Application</code>中我们会调用<code>ARouter.init(this);</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(Application application)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!hasInit) &#123;</div><div class="line">        logger = _ARouter.logger;</div><div class="line">        _ARouter.logger.info(Consts.TAG, <span class="string">"ARouter init start."</span>);</div><div class="line">        hasInit = _ARouter.init(application);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (hasInit) &#123;</div><div class="line">            _ARouter.afterInit();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        _ARouter.logger.info(Consts.TAG, <span class="string">"ARouter init over."</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>第一步判断有没有初始化过，如果没有，会调用<code>_ARouter.init(application);</code>方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">boolean</span> <span class="title">init</span><span class="params">(Application application)</span> </span>&#123;</div><div class="line">    mContext = application;</div><div class="line">    LogisticsCenter.init(mContext, executor);</div><div class="line">    logger.info(Consts.TAG, <span class="string">"ARouter init success!"</span>);</div><div class="line">    hasInit = <span class="keyword">true</span>;</div><div class="line">    mHandler = <span class="keyword">new</span> Handler(Looper.getMainLooper());</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这个方法中保存了<code>application</code>以及创建了一个主线程<code>mHandler</code>，以及调用<code>LogisticsCenter.init(mContext, executor);</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(Context context, ThreadPoolExecutor tpe)</span> <span class="keyword">throws</span> HandlerException </span>&#123;</div><div class="line">    mContext = context;</div><div class="line">    executor = tpe;</div><div class="line"></div><div class="line">    <span class="comment">//...此处省略部分代码</span></div><div class="line">    Set&lt;String&gt; routerMap;</div><div class="line"></div><div class="line">    <span class="comment">// It will rebuild router map every times when debuggable.</span></div><div class="line">    <span class="keyword">if</span> (ARouter.debuggable() || PackageUtils.isNewVersion(context)) &#123;</div><div class="line">        logger.info(TAG, <span class="string">"Run with debug mode or new install, rebuild router map."</span>);</div><div class="line">        <span class="comment">// These class was generated by arouter-compiler.</span></div><div class="line">        routerMap = ClassUtils.getFileNameByPackageName(mContext, ROUTE_ROOT_PAKCAGE);</div><div class="line">        <span class="keyword">if</span> (!routerMap.isEmpty()) &#123;</div><div class="line">            context.getSharedPreferences(AROUTER_SP_CACHE_KEY, Context.MODE_PRIVATE).edit().putStringSet(AROUTER_SP_KEY_MAP, routerMap).apply();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        PackageUtils.updateVersion(context);    <span class="comment">// Save new version name when router map update finishes.</span></div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        logger.info(TAG, <span class="string">"Load router map from cache."</span>);</div><div class="line">        routerMap = <span class="keyword">new</span> HashSet&lt;&gt;(context.getSharedPreferences(AROUTER_SP_CACHE_KEY, Context.MODE_PRIVATE).getStringSet(AROUTER_SP_KEY_MAP, <span class="keyword">new</span> HashSet&lt;String&gt;()));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//...此处省略部分代码</span></div><div class="line"></div><div class="line">    <span class="keyword">for</span> (String className : routerMap) &#123;</div><div class="line">        <span class="keyword">if</span> (className.startsWith(ROUTE_ROOT_PAKCAGE + DOT + SDK_NAME + SEPARATOR + SUFFIX_ROOT)) &#123;</div><div class="line">            <span class="comment">// This one of root elements, load root.</span></div><div class="line">            ((IRouteRoot) (Class.forName(className).getConstructor().newInstance())).loadInto(Warehouse.groupsIndex);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (className.startsWith(ROUTE_ROOT_PAKCAGE + DOT + SDK_NAME + SEPARATOR + SUFFIX_INTERCEPTORS)) &#123;</div><div class="line">            <span class="comment">// Load interceptorMeta</span></div><div class="line">            ((IInterceptorGroup) (Class.forName(className).getConstructor().newInstance())).loadInto(Warehouse.interceptorsIndex);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (className.startsWith(ROUTE_ROOT_PAKCAGE + DOT + SDK_NAME + SEPARATOR + SUFFIX_PROVIDERS)) &#123;</div><div class="line">            <span class="comment">// Load providerIndex</span></div><div class="line">            ((IProviderGroup) (Class.forName(className).getConstructor().newInstance())).loadInto(Warehouse.providersIndex);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//...此处省略部分代码</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>首先判断是否开启了<code>Debug</code>模式或者版本号是否有更新，两条件满足其一，则<code>ClassUtils.getFileNameByPackageName(mContext, ROUTE_ROOT_PAKCAGE);</code>这个方法会放在线程池中的子线程执行，就是获取到所有以<code>com.alibaba.android.arouter.routes</code>为头部的<code>class</code>路径（即通过编译时注解生成对应的 class 文件）的集合，如果不为空则保存到 SP 文件中，如果两个条件没一个满足的话，则会从 SP 中获取之前保存的集合。然后遍历集合，刷选出特定路径，获取到<code>class</code>实例通过构造器创建对象，调用<code>loadInto</code>方法，比如可以在<code>/modulea/build/generated/ap_generated_sources/debug/out/com/alibaba/android/arouter/routes</code>下找到符合该规则的<code>ARouter$$Root$$modulea</code>调用<code>loadInto</code>方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadInto</span><span class="params">(Map&lt;String, Class&lt;? extends IRouteGroup&gt;&gt; routes)</span> </span>&#123;</div><div class="line">  routes.put(<span class="string">"modulea"</span>, ARouter$$Group$$modulea.class);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>ARouter$$Group$$modulea</code>也是编译生成的类，<code>routes</code>即<code>Warehouse.groupsIndex</code>，接着看其内部<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Warehouse</span> </span>&#123;</div><div class="line">    <span class="comment">// Cache route and metas</span></div><div class="line">    <span class="keyword">static</span> Map&lt;String, Class&lt;? extends IRouteGroup&gt;&gt; groupsIndex = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">    <span class="keyword">static</span> Map&lt;String, RouteMeta&gt; routes = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line"></div><div class="line">    <span class="comment">// Cache provider</span></div><div class="line">    <span class="keyword">static</span> Map&lt;Class, IProvider&gt; providers = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">    <span class="keyword">static</span> Map&lt;String, RouteMeta&gt; providersIndex = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line"></div><div class="line">    <span class="comment">// Cache interceptor</span></div><div class="line">    <span class="keyword">static</span> Map&lt;Integer, Class&lt;? extends IInterceptor&gt;&gt; interceptorsIndex = <span class="keyword">new</span> UniqueKeyTreeMap&lt;&gt;(<span class="string">"More than one interceptors use same priority [%s]"</span>);</div><div class="line">    <span class="keyword">static</span> List&lt;IInterceptor&gt; interceptors = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</div><div class="line">        routes.clear();</div><div class="line">        groupsIndex.clear();</div><div class="line">        providers.clear();</div><div class="line">        providersIndex.clear();</div><div class="line">        interceptors.clear();</div><div class="line">        interceptorsIndex.clear();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这个类的作用就是用来存储的，像<code>ARouter$$Group$$modulea.class</code>就保存在<code>groupsIndex</code>中，至于<code>ARouter$$Group$$modulea</code>中的逻辑我们后面会看到，初始化流程就是如此了，接着我们来分析下<code>ARouter.getInstance().build(providerName).navigation()</code>，<br><code>getInstance()</code>方法会获取到<code>ARouter</code>的实例，下一步调用<code>build(provideName)</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Postcard <span class="title">build</span><span class="params">(String path)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> _ARouter.getInstance().build(path);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>其实就是调用了<code>_ARouter</code>实例的<code>build</code>方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> Postcard <span class="title">build</span><span class="params">(String path)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (TextUtils.isEmpty(path)) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> HandlerException(Consts.TAG + <span class="string">"Parameter is invalid!"</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        PathReplaceService pService = ARouter.getInstance().navigation(PathReplaceService.class);</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != pService) &#123;</div><div class="line">            path = pService.forString(path);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> build(path, extractGroup(path));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>我们没有定义<code>PathReplaceService</code>，继续<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> Postcard <span class="title">build</span><span class="params">(String path, String group)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (TextUtils.isEmpty(path) || TextUtils.isEmpty(group)) &#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> HandlerException(Consts.TAG + <span class="string">"Parameter is invalid!"</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        PathReplaceService pService = ARouter.getInstance().navigation(PathReplaceService.class);</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != pService) &#123;</div><div class="line">            path = pService.forString(path);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Postcard(path, group);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>extractGroup</code>方法获取到的是第一对“/ ”之间的字串，代表着<code>group</code>名称，比如这里“/modulea/provider”中的<code>modulea</code>，最后会通过“/modulea/provider”和<code>modulea</code>创建一个<code>Postcard</code>实例，<code>Postcard</code>是<code>RouteMeta</code>的子类，而<code>RouteMeta</code>保存的是路由的信息。ok得到这个实例之后调用了<code>Postcard</code>的<code>navigation()</code>方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">navigation</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> navigation(<span class="keyword">null</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">navigation</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> navigation(context, <span class="keyword">null</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">navigation</span><span class="params">(Context context, NavigationCallback callback)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> ARouter.getInstance().navigation(context, <span class="keyword">this</span>, -<span class="number">1</span>, callback);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>最终调用<code>ARouter</code>的<code>navigation</code>方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">navigation</span><span class="params">(Context mContext, Postcard postcard, <span class="keyword">int</span> requestCode, NavigationCallback callback)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> _ARouter.getInstance().navigation(mContext, postcard, requestCode, callback);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后又回到了<code>_ARouter</code>调用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> Object <span class="title">navigation</span><span class="params">(<span class="keyword">final</span> Context context, <span class="keyword">final</span> Postcard postcard, <span class="keyword">final</span> <span class="keyword">int</span> requestCode, <span class="keyword">final</span> NavigationCallback callback)</span> </span>&#123;</div><div class="line">    <span class="comment">//...此处省略部分代码</span></div><div class="line"></div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        LogisticsCenter.completion(postcard);</div><div class="line">    &#125; <span class="keyword">catch</span> (NoRouteFoundException ex) &#123;</div><div class="line">        <span class="comment">//...此处省略部分代码</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != callback) &#123;</div><div class="line">        callback.onFound(postcard);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (!postcard.isGreenChannel()) &#123;   <span class="comment">// It must be run in async thread, maybe interceptor cost too mush time made ANR.</span></div><div class="line">        interceptorService.doInterceptions(postcard, <span class="keyword">new</span> InterceptorCallback() &#123;</div><div class="line">           </div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onContinue</span><span class="params">(Postcard postcard)</span> </span>&#123;</div><div class="line">                _navigation(context, postcard, requestCode, callback);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onInterrupt</span><span class="params">(Throwable exception)</span> </span>&#123;</div><div class="line">                <span class="keyword">if</span> (<span class="keyword">null</span> != callback) &#123;</div><div class="line">                    callback.onInterrupt(postcard);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                logger.info(Consts.TAG, <span class="string">"Navigation failed, termination by interceptor : "</span> + exception.getMessage());</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> _navigation(context, postcard, requestCode, callback);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>看看<code>LogisticsCenter.completion(postcard);</code>中的逻辑<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">completion</span><span class="params">(Postcard postcard)</span> </span>&#123;</div><div class="line">    <span class="comment">//...此处省略部分代码</span></div><div class="line"></div><div class="line">    <span class="comment">//根据完整路径获取 routeMeta 对象</span></div><div class="line">    RouteMeta routeMeta = Warehouse.routes.get(postcard.getPath());</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> == routeMeta) &#123; </div><div class="line">    	<span class="comment">//如果没有获取到路由的缓存对象，那么获取缓存中在初始化的时候保存的 class 即 ARouter$$Group$$modulea</span></div><div class="line">        Class&lt;? extends IRouteGroup&gt; groupMeta = Warehouse.groupsIndex.get(postcard.getGroup());  <span class="comment">// Load route meta.</span></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == groupMeta) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoRouteFoundException(TAG + <span class="string">"There is no route match the path ["</span> + postcard.getPath() + <span class="string">"], in group ["</span> + postcard.getGroup() + <span class="string">"]"</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">// Load route and cache it into memory, then delete from metas.</span></div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                <span class="comment">//...此处省略部分代码</span></div><div class="line"></div><div class="line">                <span class="comment">//通过构造器创建 ARouter$$Group$$modulea 实例</span></div><div class="line">                IRouteGroup iGroupInstance = groupMeta.getConstructor().newInstance();</div><div class="line"></div><div class="line">                <span class="comment">//把 IRouteGroup 实现类的实例中保存的路由信息放到 Warehouse 缓存中</span></div><div class="line">                <span class="comment">//比如 ARouter$$Group$$modulea 中的 </span></div><div class="line">                <span class="comment">// atlas.put("/modulea/provider", RouteMeta.build(RouteType.PROVIDER, ModuleAProvider.class, "/modulea/provider", "modulea", null, -1, -2147483648));</span></div><div class="line">                iGroupInstance.loadInto(Warehouse.routes);</div><div class="line"></div><div class="line">                <span class="comment">//移除对应 Group 的缓存，即 ARouter$$Group$$modulea</span></div><div class="line">                Warehouse.groupsIndex.remove(postcard.getGroup());</div><div class="line"></div><div class="line">                <span class="comment">//...此处省略部分代码</span></div><div class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> HandlerException(TAG + <span class="string">"Fatal exception when loading group meta. ["</span> + e.getMessage() + <span class="string">"]"</span>);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">//再次调用自身方法，此时路由信息已经不为空了，会走到下面的 else 里</span></div><div class="line">            completion(postcard);   <span class="comment">// Reload</span></div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">    	<span class="comment">// atlas.put("/modulea/provider", RouteMeta.build(RouteType.PROVIDER, ModuleAProvider.class, "/modulea/provider", "modulea", null, -1, -2147483648));</span></div><div class="line">    	<span class="comment">//routeMeta.getDestination()即ModuleAProvider.class</span></div><div class="line">        postcard.setDestination(routeMeta.getDestination());</div><div class="line"></div><div class="line">        <span class="comment">//routeMeta.getType()即RouteType.PROVIDER类型</span></div><div class="line">        postcard.setType(routeMeta.getType());</div><div class="line"></div><div class="line">        <span class="comment">//以下此例子中不关心</span></div><div class="line">        postcard.setPriority(routeMeta.getPriority());</div><div class="line">        postcard.setExtra(routeMeta.getExtra());</div><div class="line"></div><div class="line">        Uri rawUri = postcard.getUri();</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != rawUri) &#123;   <span class="comment">// Try to set params into bundle.</span></div><div class="line">            Map&lt;String, String&gt; resultMap = TextUtils.splitQueryParameters(rawUri);</div><div class="line">            Map&lt;String, Integer&gt; paramsType = routeMeta.getParamsType();</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (MapUtils.isNotEmpty(paramsType)) &#123;</div><div class="line">                <span class="comment">// Set value by its type, just for params which annotation by @Param</span></div><div class="line">                <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; params : paramsType.entrySet()) &#123;</div><div class="line">                    setValue(postcard,</div><div class="line">                            params.getValue(),</div><div class="line">                            params.getKey(),</div><div class="line">                            resultMap.get(params.getKey()));</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="comment">// Save params name which need auto inject.</span></div><div class="line">                postcard.getExtras().putStringArray(ARouter.AUTO_INJECT, paramsType.keySet().toArray(<span class="keyword">new</span> String[]&#123;&#125;));</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">// Save raw uri</span></div><div class="line">            postcard.withString(ARouter.RAW_URI, rawUri.toString());</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">//根据路由类型执行不同逻辑</span></div><div class="line">        <span class="keyword">switch</span> (routeMeta.getType()) &#123;</div><div class="line">            <span class="keyword">case</span> PROVIDER:  <span class="comment">// if the route is provider, should find its instance</span></div><div class="line">                <span class="comment">// Its provider, so it must implement IProvider</span></div><div class="line">                <span class="comment">//通过路由信息获取到 ModuleAProvider.class</span></div><div class="line">                Class&lt;? extends IProvider&gt; providerMeta = (Class&lt;? extends IProvider&gt;) routeMeta.getDestination();</div><div class="line">          		<span class="comment">//第一次拿到的是 null</span></div><div class="line">                IProvider instance = Warehouse.providers.get(providerMeta);</div><div class="line">                <span class="keyword">if</span> (<span class="keyword">null</span> == instance) &#123; <span class="comment">// There's no instance of this provider</span></div><div class="line">                    IProvider provider;</div><div class="line">                    <span class="keyword">try</span> &#123;</div><div class="line">                    	<span class="comment">//通过 ModuleAProvider.class 的构造器创建实例</span></div><div class="line">                        provider = providerMeta.getConstructor().newInstance();</div><div class="line">                        <span class="comment">//调用 ModuleAProvider 实例的 init 方法</span></div><div class="line">                        provider.init(mContext);</div><div class="line">                        <span class="comment">//将 Provider 放入缓存中</span></div><div class="line">                        Warehouse.providers.put(providerMeta, provider);</div><div class="line">                        instance = provider;</div><div class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> HandlerException(<span class="string">"Init provider failed! "</span> + e.getMessage());</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="comment">//将 ModuleAProvider 实例放入 postcard 路由信息中</span></div><div class="line">                postcard.setProvider(instance);</div><div class="line">                postcard.greenChannel();    <span class="comment">// Provider should skip all of interceptors</span></div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> FRAGMENT:</div><div class="line">                postcard.greenChannel();    <span class="comment">// Fragment needn't interceptors</span></div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>具体逻辑看代码注释了，大致就是编译生成的<code>Group</code>下的具体路径和路由信息放入<code>Warehouse</code>缓存中，如果没有则将路由信息放入缓存，并移除<code>Group</code>缓存，然后再一次调用自己，此时对应路径下已经有具体的路由信息了，此时会再将路由信息放入到传入参数<code>postcard</code>的路由信息中，如果是<code>Provider</code>类型，如果没有缓存还会创建实例设置到<code>postcard</code>，并放入<code>Warehouse</code>里缓存。<br>接下来调用<code>_navigation(context, postcard, requestCode, callback);</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> Object <span class="title">_navigation</span><span class="params">(<span class="keyword">final</span> Context context, <span class="keyword">final</span> Postcard postcard, <span class="keyword">final</span> <span class="keyword">int</span> requestCode, <span class="keyword">final</span> NavigationCallback callback)</span> </span>&#123;</div><div class="line">    <span class="keyword">final</span> Context currentContext = <span class="keyword">null</span> == context ? mContext : context;</div><div class="line"></div><div class="line">    <span class="keyword">switch</span> (postcard.getType()) &#123;</div><div class="line">        <span class="keyword">case</span> ACTIVITY:</div><div class="line">            <span class="comment">// Build intent</span></div><div class="line">            <span class="keyword">final</span> Intent intent = <span class="keyword">new</span> Intent(currentContext, postcard.getDestination());</div><div class="line">            intent.putExtras(postcard.getExtras());</div><div class="line"></div><div class="line">            <span class="comment">// Set flags.</span></div><div class="line">            <span class="keyword">int</span> flags = postcard.getFlags();</div><div class="line">            <span class="keyword">if</span> (-<span class="number">1</span> != flags) &#123;</div><div class="line">                intent.setFlags(flags);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!(currentContext <span class="keyword">instanceof</span> Activity)) &#123;    <span class="comment">// Non activity, need less one flag.</span></div><div class="line">                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">// Set Actions</span></div><div class="line">            String action = postcard.getAction();</div><div class="line">            <span class="keyword">if</span> (!TextUtils.isEmpty(action)) &#123;</div><div class="line">                intent.setAction(action);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="comment">// Navigation in main looper.</span></div><div class="line">            runInMainThread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                    startActivity(requestCode, currentContext, intent, postcard, callback);</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> PROVIDER:</div><div class="line">            <span class="keyword">return</span> postcard.getProvider();</div><div class="line">        <span class="keyword">case</span> BOARDCAST:</div><div class="line">        <span class="keyword">case</span> CONTENT_PROVIDER:</div><div class="line">        <span class="keyword">case</span> FRAGMENT:</div><div class="line">            Class fragmentMeta = postcard.getDestination();</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                Object instance = fragmentMeta.getConstructor().newInstance();</div><div class="line">                <span class="keyword">if</span> (instance <span class="keyword">instanceof</span> Fragment) &#123;</div><div class="line">                    ((Fragment) instance).setArguments(postcard.getExtras());</div><div class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (instance <span class="keyword">instanceof</span> android.support.v4.app.Fragment) &#123;</div><div class="line">                    ((android.support.v4.app.Fragment) instance).setArguments(postcard.getExtras());</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">return</span> instance;</div><div class="line">            &#125; <span class="keyword">catch</span> (Exception ex) &#123;</div><div class="line">                logger.error(Consts.TAG, <span class="string">"Fetch fragment instance error, "</span> + TextUtils.formatStackTrace(ex.getStackTrace()));</div><div class="line">            &#125;</div><div class="line">        <span class="keyword">case</span> METHOD:</div><div class="line">        <span class="keyword">case</span> SERVICE:</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>因为我们<code>postcard.getType()</code>是<code>PROVIDER</code>类型的，所有直接返回了我们上一步在<code>postcard</code>中塞入创建的<code>ModuleAProvider</code>实例，接着就可以调用其<code>sayHello</code>方法了。<br>不难发现，其实在<code>ARouter</code>中<code>Group</code>的划分是以路径中第一对“/”中的字串作为基准的，一开始会将根据不同<code>Group</code>生成的<code>ARouter$$Group$$字串</code>的 class 放入<code>Warehouse</code>中缓存，然后根据调用的 path 将不同<code>Group</code>的具体路径对应的具体路由加载进<code>Warehouse</code>，再获取对应的<code>RouteMeta</code>路由信息，重新组装到<code>postcard</code>中，最后调用<code>_navigation</code>根据<code>postcard</code>不同的类型执行相应的逻辑。还有一点非常明显，当我们调用<code>ARouter</code>的方法的时候最终都会交由<code>_ARouter</code>去执行，这里用到的是结构性设计模式中的外观模式。<br>大致分析就是如此了。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2019/10/24/ARouter原理探析/" data-id="ck27hl4nf0006nbs66vjhtlar" class="article-share-link">分享到</a><div class="tags"><a href="/tagsß/android/">android</a></div><div class="post-nav"><a href="/2019/10/26/重拾-DSA-之二叉搜索树/" class="pre">重拾 DSA 之二叉搜索树</a><a href="/2019/10/22/ThreadLocal简析/" class="next">ThreadLocal简析</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tagsß/android/" style="font-size: 15px;">android</a> <a href="/tagsß/Java/" style="font-size: 15px;">Java</a> <a href="/tagsß/database/" style="font-size: 15px;">database</a> <a href="/tagsß/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tagsß/DSA/" style="font-size: 15px;">DSA</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/10/26/重拾-DSA-之二叉搜索树/">重拾 DSA 之二叉搜索树</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/24/ARouter原理探析/">ARouter原理探析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/22/ThreadLocal简析/">ThreadLocal简析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/21/重拾-DSA-排序算法之堆排序/">重拾 DSA 排序算法之堆排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/20/Java线程池ThreadPoolExecutor介绍/">Java线程池ThreadPoolExecutor介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/19/ButterKnife原理探析/">ButterKnife原理探析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/18/OkHttp原理探析/">OkHttp原理探析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/17/ConcurrentHashMap原理探析/">ConcurrentHashMap原理探析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/16/ReentrantLock原理探析/">ReentrantLock原理探析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/15/RxJava原理探析/">RxJava原理探析</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://zhoukekestar.github.io/" title="zhoukekestar" target="_blank">zhoukekestar</a><ul></ul><a href="https://github.com/EastWoodYang" title="EastWood Yang" target="_blank">EastWood Yang</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Lucien.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-88576409-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>